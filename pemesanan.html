<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portofolio</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            overflow-x: hidden;
            /* Tambahkan baris ini */
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container,
        .catalog {
            flex: 1 0 auto;
        }

        footer {
            flex-shrink: 0;
            background: #0a0a0a;
            color: white;
            text-align: center;
            padding: 1rem;
            margin-top: 2rem;
        }

        /* popup accaount */
        .popup-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 170, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1055;
            backdrop-filter: blur(4px);
        }

        .popup-content {
            background: #ffffff;
            color: #333;
            padding: 2rem 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 0 30px rgba(0, 170, 255, 0.7);
            text-align: center;
            position: relative;
            animation: popFade 0.4s ease-out;
        }

        @keyframes popFade {
            from {
                transform: scale(0.8);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Navbar Link Glow */
        body.dark-theme .nav-link {
            color: #0ff !important;
            text-shadow: 0 0 6px rgba(0, 255, 255, 0.6);
        }

        body.dark-theme .nav-link.active {
            color: #fff !important;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.9);
        }

        /* Judul Glow (Kategori & Koleksi) */
        body.dark-theme .highlight-title {
            background-color: transparent;
            color: #0ff;
            text-shadow: 0 0 10px #0ff;
            border: 1px solid #0ff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }

        /* Card product Glow */
        body.dark-theme .card {
            background-color: #222;
            color: #0ff;
            border: 1px solid #0ff;
            box-shadow: 0 0 12px rgba(0, 255, 255, 0.3);
        }

        /* === Navigasi Global === */
        .nav-link {
            font-weight: bold;
            font-size: 1rem;
            transition: 0.3s ease;
        }

        /* Neon efek untuk dark mode */
        body.dark-theme .nav-link {
            color: #0ff !important;
            text-shadow: 0 0 6px rgba(0, 255, 255, 0.5);
        }

        /* Aktif tab dengan efek neon lebih terang */
        body.dark-theme .nav-link.active {
            color: #fff !important;
            text-shadow:
                0 0 10px rgba(0, 255, 255, 0.8),
                0 0 15px rgba(0, 255, 255, 0.5);
        }

        .nav-underline .nav-link {
            font-weight: bold;
            font-size: 1rem;
            color: black;
            position: relative;
            padding-bottom: 6px;
            transition: all 0.3s ease;
        }

        /* Glow saat HOVER */
        .nav-underline .nav-link:hover {
            color: black;
            text-shadow: 0 0 6px rgba(0, 255, 255, 0.6);
        }

        /* Garis bawah untuk yang aktif */
        .nav-underline .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: black;
        }

        #loadingSpinner .popup-content {
            background: #fff;
            border-radius: 1rem;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff00cc, #3333ff);
            color: #fff;
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
        }

        h2 {
            color: #0ff;
            text-shadow: 0 0 10px #0ff;
        }

        .table thead {
            background-color: #000;
            color: #0ff;
        }

        .table tbody tr:hover {
            background-color: rgba(0, 255, 255, 0.2);
        }

        .neon-container {
            box-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            border-radius: 12px;
            padding: 30px;
            background: #ffffff;
            color: #333;
            margin-top: 2rem;
            margin-bottom: 2rem;
        }

        .btn-status {
            margin: 10px 5px;
        }

        footer {
            width: 100vw;
            margin-left: 0;
            margin-right: 0;
            padding: 1.5rem 0;
            background: #0a0a0a;
            color: white;
            text-align: center;
            box-sizing: border-box;
        }

        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.75);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #fff;
            color: #000;
            padding: 2rem;
            border-radius: 10px;
            min-width: 300px;
            max-width: 90%;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            cursor: pointer;
            font-size: 1.5rem;
        }

        .btn-neon {
            background-color: transparent;
            color: #0ff;
            font-weight: bold;
            border: 2px solid #0ff;
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            box-shadow: 0 0 10px #0ff, 0 0 20px #0ff inset;
            transition: all 0.3s ease;
        }

        .btn-neon:hover {
            background-color: #0ff;
            color: black;
            box-shadow: 0 0 20px #0ff, 0 0 30px #0ff;
        }

        #daftar-kritik {
            padding: 0 1rem;
        }

        .neon-box {
            background-color: #111;
            color: #0ff;
            padding: 1.5rem;
            margin: 2rem auto;
            border-radius: 10px;
            box-shadow: 0 0 15px #0ff;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            width: fit-content;
            max-width: 90%;
        }

        .neon-glow-card {
            border: 1px solid #0ff;
            box-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            border-radius: 10px;
            padding: 15px;
            transition: 0.3s ease;
            margin: 1rem auto;
            max-width: 500px;
        }

        /* tema terang neon */
        body.light-theme .btn-neon {
            color: #0ff;
            border: 2px solid #0ff;
            box-shadow: 0 0 10px #0ff;
        }

        body.light-theme .btn-neon:hover {
            background-color: #0ff;
            color: black;
            box-shadow: 0 0 20px #0ff;
        }

        body.light-theme .product h3 {
            color: #0ff;
            text-shadow: 0 0 4px rgba(0, 255, 255, 0.3);
        }

        body.light-theme .highlight-title {
            color: #0ff;
            border: 1px solid #0ff;
            text-shadow: 0 0 5px #0ff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }


        .neon-glow-card button {
            float: right;
        }

        .neon-glow-card strong {
            font-size: 1.2rem;
            color: #0ff;
            text-shadow: 0 0 6px #0ff;
        }

        .neon-glow-card span {
            display: block;
            margin-top: 0.3rem;
            font-size: 0.95rem;
        }

        .neon-glow-card button {
            float: right;
            margin-top: 1rem;
        }

        .modal-content {
            background: #111;
            color: #0ff;
            border-radius: 1rem;
            box-shadow: 0 0 25px #0ff;
            padding: 2rem;
            position: relative;
            border: 1px solid #0ff;
            max-width: 800px;
            width: 95%;
        }

        .modal-content h2 {
            color: #0ff;
            text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            font-weight: bold;
        }

        /* CARD adaptif tema (wishlist & keranjang) */
        .neon-glow-card {
            border: 1px solid #0ff;
            box-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            border-radius: 10px;
            padding: 15px;
            transition: 0.3s ease;
            margin: 1rem auto;
            max-width: 500px;
        }

        /* Tema terang */
        body.light-theme .neon-glow-card {
            background-color: #fff;
            color: #000;
        }

        /* Tema gelap */
        body.dark-theme .neon-glow-card {
            background-color: #111;
            color: #0ff;
        }

        #checkout-form input,
        #checkout-form textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 15px;
            border: 1px solid #0ff;
            border-radius: 8px;
            background: #000;
            color: #0ff;
        }

        #checkout-form label {
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
            color: #0ff;
        }

        #checkout-form button[type="submit"] {
            background-color: transparent;
            color: #0ff;
            font-weight: bold;
            border: 2px solid #0ff;
            border-radius: 8px;
            padding: 10px 20px;
            width: 100%;
            cursor: pointer;
            box-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            transition: 0.3s ease;
        }

        #checkout-form button[type="submit"]:hover {
            background-color: #0ff;
            color: black;
        }

        #main-nav-links {
            white-space: nowrap;
            
        }

        #main-nav-links .nav-item {
            display: inline-block;
            float: none;
            vertical-align: top;
        }

        body.dark-theme .nav-link {
            font-size: 14px !important;
        }

        .nav-underline .nav-link {
            font-size: 14px;
        }
    </style>

<body>
    <nav id="navbar" class="navbar navbar-expand-lg border-bottom mb-3">
        <div class="container-fluid d-flex align-items-center">
            <div class="d-flex align-items-center gap-2">
                <a class="navbar-brand d-flex align-items-center gap-2 mb-0" href="#">
                    <span>Arlynna Studio</span>
                </a>
                <button id="toggleTheme" class="btn btn-sm btn-outline-secondary" title="Ganti Tema">üåô</button>
            </div>
            <div class="ms-auto d-flex gap-4 align-items-center">
                <a href="#" class="btn btn-outline-danger position-relative" onclick="showWishlistModal()">
                    ‚ù§Ô∏è
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                        id="wishlist-count">0</span>
                </a>
                <a href="#" class="btn btn-outline-primary position-relative" onclick="showCartModal()">
                    üõí
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                        id="cart-count">0</span>
                </a>
            </div>
            <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <!-- Dipindahkan ke bawah sini -->
    <div class="container mb-4">
        <ul class="nav nav-underline d-flex flex-nowrap" id="main-nav-links">
            <li class="nav-item"><a class="nav-link active text-nowrap" href="LOGIN.html">LOGIN</a></li>
            <li class="nav-item"><a class="nav-link text-dark text-nowrap" href="HOME.html">HOME</a></li>
            <li class="nav-item"><a class="nav-link text-dark text-nowrap" href="BAJU_LAKI-LAKI.html">BAJU LAKI-LAKI</a>
            </li>
            <li class="nav-item"><a class="nav-link text-dark text-nowrap" href="CELANA_LAKI-LAKI.html">CELANA
                    LAKI-LAKI</a></li>
            <li class="nav-item"><a class="nav-link text-dark text-nowrap" href="BAJU_WANITA.html">BAJU WANITA</a></li>
            <li class="nav-item"><a class="nav-link text-dark text-nowrap" href="ROK_DAN_CELANA_WANITA.html">ROK DAN
                    CELANA WANITA</a></li>
            <li class="nav-item"><a class="nav-link text-dark text-nowrap" href="AKSESORIS_WANITA.html">AKSESORIS
                    WANITA</a></li>
            <li class="nav-item"><a class="nav-link text-dark text-nowrap" href="pemesanan.html">DAFTAR PEMESANAN</a>
            </li>
        </ul>
    </div>
    <!-- Koleksi Terbaru -->


    <div class="container neon-container mb-5" style="display:none;" id="main-content">
        <h2 class="mb-4 text-center">üìã Daftar Pemesanan</h2>
        <div class="table-responsive">
            <table class="table table-bordered table-hover text-center">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Nama</th>
                        <th>Nomor HP</th>
                        <th>Alamat</th>
                        <th>product</th>
                        <th>Jumlah</th>
                        <th>Total Harga</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="data-pemesanan">
                    <!-- Data akan dimasukkan lewat JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <div class="container neon-container mt-5">
        <h2 class="mb-4 text-center">üí¨ Kritik & Saran</h2>
        <form id="form-kritik" onsubmit="return simpanKritik(event)">
            <div class="mb-3">
                <label for="kritikNama" class="form-label">Nama</label>
                <input type="text" class="form-control" id="kritikNama" placeholder="Masukkan nama kamu" required>
            </div>
            <div class="mb-3">
                <label for="kritikIsi" class="form-label">Pesan</label>
                <textarea class="form-control" id="kritikIsi" rows="4" placeholder="Tulis kritik atau saran..."
                    required></textarea>
            </div>
            <button type="submit" class="btn btn-neon w-100">Kirim</button>
        </form>
        <div id="kritikTerkirim" class="mt-3 text-success fw-bold" style="display: none;">‚úÖ Terima kasih atas
            masukannya!</div>
    </div>
    <hr class="my-4">
    <div class="container px-3">
        <h4 class="text-center text-info">üìù Daftar Kritik & Saran</h4>
        <div id="daftar-kritik" class="mt-3"></div>
    </div>


    <footer>
        <p>üìç Jl. Fashion No. 123, Probolinggo</p>
        <p>üì± Instagram: @arlynnastudio | WhatsApp: 0812-3456-7890</p>
        <p class="mb-0">&copy; 2025 Arlynna Studio</p>
    </footer>
    <div id="wishlist-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-btn" onclick="closeWishlistModal()">&times;</span>
            <h2 class="text-center">Wishlist Saya</h2>
            <div id="wishlist-items" class="text-center"></div>
        </div>
    </div>

    <!-- Modal Keranjang -->
    <div id="cart-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-btn" onclick="closeCartModal()">&times;</span>
            <h2 class="text-center">Keranjang Saya</h2>
            <div id="cart-items" class="text-center"></div>
            <button class="btn-neon d-block mx-auto mt-3" onclick="proceedToCheckout()">Lanjut ke Pembayaran</button>
        </div>
    </div>
    <!-- Modal Konfirmasi Pembatalan -->
    <div id="batal-popup" class="modal" style="display: none;">
        <div class="modal-content text-center">
            <span class="close-btn" onclick="tutupPopupBatal()">&times;</span>
            <h4 id="batal-message">Yakin ingin membatalkan pesanan ini?</h4>
            <div class="mt-3">
                <button class="btn btn-danger" onclick="konfirmasiBatal(true)">Ya, Batalkan</button>
                <button class="btn btn-secondary" onclick="konfirmasiBatal(false)">Tidak</button>
            </div>
        </div>
    </div>

    <div id="checkout-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-btn" onclick="closeCheckoutModal()">&times;</span>
            <h2>Checkout (COD)</h2>
            <div id="checkout-summary"></div>
            <form id="checkout-form" onsubmit="return confirmOrder(event)">
                <label>Nama:</label>
                <input type="text" id="nama" required><br>
                <label>Nomor HP:</label>
                <input type="text" id="nomor-hp" required><br>
                <label>Alamat Rumah:</label>
                <textarea id="alamat" required></textarea><br>
                <button type="submit">Konfirmasi Pembelian</button>
            </form>
        </div>
    </div>



    <script>

        let indexBatal = null;

        function hapusPemesanan(index) {
            indexBatal = index;
            document.getElementById("batal-popup").style.display = "flex";
        }

        function tutupPopupBatal() {
            document.getElementById("batal-popup").style.display = "none";
            indexBatal = null;
        }

        function konfirmasiBatal(setuju) {
            if (setuju && indexBatal !== null) {
                let data = JSON.parse(localStorage.getItem("pemesanan")) || [];
                if (indexBatal >= 0 && indexBatal < data.length) {
                    data.splice(indexBatal, 1);
                    localStorage.setItem("pemesanan", JSON.stringify(data));
                    tampilkanPemesanan(data);
                }
            }
            tutupPopupBatal();
        }

        function tampilkanPemesanan(data) {
            const tbody = document.getElementById('data-pemesanan');
            tbody.innerHTML = '';

            data.forEach((item, index) => {
                if (!item.status) item.status = "Belum Diterima";

                // Gabungkan produk dalam item.items
                const produkList = item.items.map(p =>
                    `${p.title} (${p.color}, ${p.size}) x${p.qty}`
                ).join("<br>");

                const total = item.items.reduce((sum, p) => {
                    return sum + (parseInt(p.price.replace(/[^\d]/g, '')) * p.qty);
                }, 0);

                const jumlah = item.items.reduce((sum, p) => sum + p.qty, 0);

                const tr = document.createElement('tr');
                tr.innerHTML = `
  <td>${index + 1}</td>
  <td>${item.nama}</td>
  <td>${item.hp}</td>
  <td>${item.alamat}</td>
  <td>${produkList}</td>
  <td>${jumlah}</td>
  <td>Rp ${total.toLocaleString()}</td>
  <td>
      <div class="d-grid gap-2">
          <button class="btn btn-sm ${item.status === 'Selesai' ? 'btn-success' : 'btn-warning'}" onclick="toggleStatus(${index})">
            ${item.status}
          </button>
          <button class="btn btn-sm btn-danger mt-1" onclick="hapusPemesanan(${index})">Batalkan</button>
      </div>
  </td>
`;

                tbody.appendChild(tr);
            });
        }

        function toggleStatus(index) {
            const data = JSON.parse(localStorage.getItem("pemesanan")) || [];
            if (!data[index]) return;

            data[index].status = data[index].status === "Selesai" ? "Belum Diterima" : "Selesai";
            localStorage.setItem("pemesanan", JSON.stringify(data));
            tampilkanPemesanan(data);
        }
        function hapusPemesanan(index) {
            const konfirmasi = confirm("Yakin ingin membatalkan pesanan ini?");
            if (!konfirmasi) return;

            let data = JSON.parse(localStorage.getItem("pemesanan")) || [];
            if (index < 0 || index >= data.length) return;

            data.splice(index, 1);
            localStorage.setItem("pemesanan", JSON.stringify(data));
            tampilkanPemesanan(data);
        }


        window.onload = () => {
            const pemesanan = JSON.parse(localStorage.getItem("pemesanan")) || [];

            localStorage.setItem("pemesanan", JSON.stringify(pemesanan));
            tampilkanPemesanan(pemesanan);
            document.getElementById("main-content").style.display = "block";

            tampilkanKritik();
        };


        function getCart() {
            const cart = localStorage.getItem('cart');
            return cart ? JSON.parse(cart) : [];
        }

        function saveCart(cart) {
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }

        function getWishlist() {
            const wishlist = localStorage.getItem('wishlist');
            return wishlist ? JSON.parse(wishlist) : [];
        }

        function saveWishlist(wishlist) {
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
            updateWishlistCount();
        }

        function updateCartCount() {
            const cart = getCart();
            const totalItems = cart.reduce((sum, item) => sum + item.qty, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        function updateWishlistCount() {
            const wishlist = getWishlist();
            document.getElementById('wishlist-count').textContent = wishlist.length;
        }

        document.addEventListener('DOMContentLoaded', () => {
            updateCartCount();
            updateWishlistCount();
        });

        function addToCart() {
            const title = document.getElementById('modal-title').textContent;
            const price = document.getElementById('modal-price').textContent;
            const warnaBtn = document.querySelector('#warna-options .option-btn.active');
            const ukuranBtn = document.querySelector('#ukuran-options .option-btn.active');

            if (!warnaBtn || !ukuranBtn) {
                showActionPopup('Silakan pilih warna dan ukuran terlebih dahulu.');
                return;
            }

            const color = warnaBtn.textContent;
            const size = ukuranBtn.textContent;

            let cart = getCart();
            const existingIndex = cart.findIndex(item =>
                item.title === title && item.color === color && item.size === size
            );

            if (existingIndex > -1) {
                cart[existingIndex].qty += 1;
            } else {
                cart.push({ title, price, color, size, qty: 1 });
            }

            saveCart(cart);
            flashNeonBadge("cart-count");
            showActionPopup("‚úîÔ∏è Produk ditambahkan ke keranjang");
        }

        function addToWishlist() {
            const title = document.getElementById('modal-title').textContent;
            const price = document.getElementById('modal-price').textContent;

            let wishlist = getWishlist();
            const exists = wishlist.some(item => item.title === title);

            if (exists) {
                showActionPopup(`'${title}' sudah ada di wishlist.`);
                return;
            }

            wishlist.push({ title, price });
            saveWishlist(wishlist);
            flashNeonBadge("wishlist-count");
            showActionPopup(`'${title}' ditambahkan ke wishlist!`);
        }

        function showCartModal() {
            const cart = getCart();
            const container = document.getElementById("cart-items");
            container.innerHTML = cart.length
                ? ""
                : `<div class="neon-box">üõí Keranjang kamu masih kosong.</div>
           <a href="HOME.html" class="btn btn-neon mt-3 d-block mx-auto" style="width: fit-content;">üõçÔ∏è Lihat Produk</a>`;

            cart.forEach((item, i) => {
                const div = document.createElement("div");
                div.className = "neon-glow-card";
                div.innerHTML = `
          <div>
            <strong>${item.title}</strong><br>
            <span>Warna: ${item.color}, Ukuran: ${item.size}</span><br>
            <span>Jumlah: ${item.qty} - ${item.price}</span>
            <button class="btn btn-sm btn-danger mt-2" onclick="removeFromCart(${i}); showCartModal()">Hapus</button>
          </div>`;
                container.appendChild(div);
            });

            document.getElementById("cart-modal").style.display = "flex";
        }

        function showWishlistModal() {
            const wishlist = getWishlist();
            const container = document.getElementById("wishlist-items");
            container.innerHTML = wishlist.length
                ? ""
                : `<div class="neon-box">‚ù§Ô∏è Wishlist kamu masih kosong.</div>`;

            wishlist.forEach((item, i) => {
                const div = document.createElement("div");
                div.className = "neon-glow-card";
                div.innerHTML = `
          <div>
            <strong>${item.title}</strong><br>
            <span>${item.price}</span>
            <button class="btn btn-sm btn-danger mt-2" onclick="removeFromWishlist(${i}); showWishlistModal()">Hapus</button>
          </div>`;
                container.appendChild(div);
            });

            document.getElementById("wishlist-modal").style.display = "flex";
        }

        function closeCartModal() {
            document.getElementById("cart-modal").style.display = "none";
        }


        function closeWishlistModal() {
            document.getElementById("wishlist-modal").style.display = "none";
        }
        function removeFromCart(index) {
            let cart = getCart();
            if (index >= 0 && index < cart.length) {
                cart.splice(index, 1);
                saveCart(cart);
                updateCartCount();
            }
        }


        function buyNow() {
            const title = document.getElementById('modal-title').textContent;
            const price = document.getElementById('modal-price').textContent;
            const warnaBtn = document.querySelector('#warna-options .option-btn.active');
            const ukuranBtn = document.querySelector('#ukuran-options .option-btn.active');

            if (!warnaBtn || !ukuranBtn) {
                showActionPopup('Silakan pilih warna dan ukuran terlebih dahulu.');
                return;
            }

            const color = warnaBtn.textContent;
            const size = ukuranBtn.textContent;
            const qty = 1;

            const summary = `
        <ul>
            <li>${title} (${color}, ${size}) x${qty} - ${price}</li>
        </ul>
        <p>Total: ${price}</p>`;
            document.getElementById("checkout-summary").innerHTML = summary;

            // Simpan 1 produk ke cart (sementara) agar checkout bisa proses
            localStorage.setItem("single-buy", JSON.stringify([{ title, price, color, size, qty }]));

            showConfirmPopup(`Yakin ingin membeli ${title}?`).then((confirmed) => {
                if (confirmed) {
                    closeModal();
                    document.getElementById("checkout-modal").style.display = "flex";
                }
            });

        }


        function updateCheckoutTotal() {
            const cart = getCart();
            let total = 0;
            cart.forEach(item => {
                total += parseInt(item.price.replace(/[^\d]/g, '')) * item.qty;
            });
            document.getElementById("total-checkout").textContent = `Total: Rp ${total.toLocaleString()}`;
        }

        function checkoutCart() {
            const cart = getCart();
            if (cart.length === 0) {
                showActionPopup("Keranjang masih kosong!");
                return;
            }
            const total = cart.reduce((sum, item) => sum + parseInt(item.price.replace(/[^\d]/g, '')) * item.qty, 0);
            showActionPopup(`Checkout berhasil! Total belanja: Rp ${total.toLocaleString()}`);
            localStorage.removeItem('cart');
            updateCartCount();
            updateCheckoutTotal();
        }

        function flashNeonBadge(id) {
            const el = document.getElementById(id);
            if (!el) return;
            el.classList.add("neon-badge");
            setTimeout(() => el.classList.remove("neon-badge"), 1200);
        }
        function simpanKritik(event) {
            event.preventDefault();
            const nama = document.getElementById("kritikNama").value.trim();
            const isi = document.getElementById("kritikIsi").value.trim();

            if (!nama || !isi) {
                alert("Mohon lengkapi nama dan pesan.");
                return false;
            }

            const kritikList = JSON.parse(localStorage.getItem("kritikSaran")) || [];
            kritikList.push({
                nama,
                isi,
                waktu: new Date().toLocaleString()
            });
            localStorage.setItem("kritikSaran", JSON.stringify(kritikList));

            document.getElementById("form-kritik").reset();
            document.getElementById("kritikTerkirim").style.display = "block";

            // Sembunyikan pesan sukses setelah 3 detik
            setTimeout(() => {
                document.getElementById("kritikTerkirim").style.display = "none";
            }, 3000);

            return false;
        }
        function tampilkanKritik() {
            const list = JSON.parse(localStorage.getItem("kritikSaran")) || [];
            const container = document.getElementById("daftar-kritik");

            if (list.length === 0) {
                container.innerHTML = "<p class='text-muted text-center'>Belum ada kritik atau saran.</p>";
                return;
            }

            container.innerHTML = list.map((k, i) => `
        <div class="neon-glow-card mb-3 p-3 d-flex justify-content-between align-items-start flex-wrap">
            <div>
                <strong>${k.nama}</strong> <small class="text-muted">[${k.waktu}]</small>
                <p class="mb-0 mt-2">${k.isi}</p>
            </div>
            <button class="btn btn-sm btn-danger mt-2 ms-3" onclick="hapusKritik(${i})">Hapus</button>
        </div>
    `).join('');
        }
        function hapusKritik(index) {
            let list = JSON.parse(localStorage.getItem("kritikSaran")) || [];
            list.splice(index, 1);
            localStorage.setItem("kritikSaran", JSON.stringify(list));
            tampilkanKritik();
        }

        function proceedToCheckout() {
            const cart = getCart();
            if (cart.length === 0) {
                alert("Keranjang kosong!");
                return;
            }

            // Buat ringkasan isi cart
            const summaryHTML = cart.map(item => `
            <li>${item.title} (${item.color}, ${item.size}) x${item.qty} - ${item.price}</li>
            `).join("");

            const total = cart.reduce((sum, item) => {
                return sum + parseInt(item.price.replace(/[^\d]/g, '')) * item.qty;
            }, 0);

            document.getElementById("checkout-summary").innerHTML = `
            <ul>${summaryHTML}</ul>
            <p><strong>Total:</strong> Rp ${total.toLocaleString()}</p>
    `;

            document.getElementById("cart-modal").style.display = "none";
            document.getElementById("checkout-modal").style.display = "flex";
        }

        function closeCheckoutModal() {
            document.getElementById("checkout-modal").style.display = "none";
        }

        // Simpan pesanan COD
        function confirmOrder(event) {
            event.preventDefault();

            const nama = document.getElementById("nama").value.trim();
            const hp = document.getElementById("nomor-hp").value.trim();
            const alamat = document.getElementById("alamat").value.trim();
            const cart = getCart();

            if (!nama || !hp || !alamat) {
                alert("Mohon lengkapi semua data.");
                return false;
            }

            const pemesanan = JSON.parse(localStorage.getItem("pemesanan")) || [];

            pemesanan.push({
                nama,
                hp,
                alamat,
                items: cart,
                status: "Belum Diterima"
            });

            localStorage.setItem("pemesanan", JSON.stringify(pemesanan));
            localStorage.removeItem("cart");

            updateCartCount();
            tampilkanPemesanan(pemesanan);

            alert("‚úÖ Pesanan kamu berhasil dikonfirmasi! Silakan tunggu pengiriman.");
            closeCheckoutModal();

            return false;
        }
    </script>

    </div>
    <script src="js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>